{
  "summary": {
    "total_tests": 41,
    "passed_tests": 17,
    "failed_tests": 24,
    "success_rate": "41.5%",
    "issue_1_stats_fix": false,
    "issue_2_validation_fix": false
  },
  "test_results": [
    {
      "test": "Backend Health Check",
      "passed": true,
      "details": "Backend is running. Status: healthy",
      "response_data": {
        "service": "fantasy-esports-backend",
        "status": "healthy",
        "version": "1.0.0"
      },
      "timestamp": "2025-08-04 14:41:11"
    },
    {
      "test": "Admin Login Authentication",
      "passed": true,
      "details": "Admin login successful. Token obtained.",
      "response_data": {
        "status_code": 200,
        "has_token": true
      },
      "timestamp": "2025-08-04 14:41:12"
    },
    {
      "test": "Stats Filtering - No filters",
      "passed": false,
      "details": "\u274c SQL ERROR: Statistics endpoint still failing with 500 - SQL query fix not working",
      "response_data": {
        "status_code": 500,
        "params": {},
        "response": "{\"success\":false,\"error\":\"failed to get stats: pq: syntax error at or near \\\"$1\\\"\",\"code\":\"STATS_FETCH_FAILED\"}"
      },
      "timestamp": "2025-08-04 14:41:12"
    },
    {
      "test": "Stats Filtering - SMS channel filter",
      "passed": false,
      "details": "\u274c SQL ERROR: Statistics endpoint still failing with 500 - SQL query fix not working",
      "response_data": {
        "status_code": 500,
        "params": {
          "channel": "sms"
        },
        "response": "{\"success\":false,\"error\":\"failed to get stats: pq: syntax error at or near \\\"$1\\\"\",\"code\":\"STATS_FETCH_FAILED\"}"
      },
      "timestamp": "2025-08-04 14:41:12"
    },
    {
      "test": "Stats Filtering - Email channel filter",
      "passed": false,
      "details": "\u274c SQL ERROR: Statistics endpoint still failing with 500 - SQL query fix not working",
      "response_data": {
        "status_code": 500,
        "params": {
          "channel": "email"
        },
        "response": "{\"success\":false,\"error\":\"failed to get stats: pq: syntax error at or near \\\"$1\\\"\",\"code\":\"STATS_FETCH_FAILED\"}"
      },
      "timestamp": "2025-08-04 14:41:12"
    },
    {
      "test": "Stats Filtering - Fast2SMS provider filter",
      "passed": false,
      "details": "\u274c SQL ERROR: Statistics endpoint still failing with 500 - SQL query fix not working",
      "response_data": {
        "status_code": 500,
        "params": {
          "provider": "fast2sms"
        },
        "response": "{\"success\":false,\"error\":\"failed to get stats: pq: syntax error at or near \\\"$1\\\"\",\"code\":\"STATS_FETCH_FAILED\"}"
      },
      "timestamp": "2025-08-04 14:41:13"
    },
    {
      "test": "Stats Filtering - SMTP provider filter",
      "passed": false,
      "details": "\u274c SQL ERROR: Statistics endpoint still failing with 500 - SQL query fix not working",
      "response_data": {
        "status_code": 500,
        "params": {
          "provider": "smtp"
        },
        "response": "{\"success\":false,\"error\":\"failed to get stats: pq: syntax error at or near \\\"$1\\\"\",\"code\":\"STATS_FETCH_FAILED\"}"
      },
      "timestamp": "2025-08-04 14:41:13"
    },
    {
      "test": "Stats Filtering - SMS + Fast2SMS filter",
      "passed": false,
      "details": "\u274c SQL ERROR: Statistics endpoint still failing with 500 - SQL query fix not working",
      "response_data": {
        "status_code": 500,
        "params": {
          "channel": "sms",
          "provider": "fast2sms"
        },
        "response": "{\"success\":false,\"error\":\"failed to get stats: pq: syntax error at or near \\\"$1\\\"\",\"code\":\"STATS_FETCH_FAILED\"}"
      },
      "timestamp": "2025-08-04 14:41:13"
    },
    {
      "test": "Stats Filtering - Email + SMTP filter",
      "passed": false,
      "details": "\u274c SQL ERROR: Statistics endpoint still failing with 500 - SQL query fix not working",
      "response_data": {
        "status_code": 500,
        "params": {
          "channel": "email",
          "provider": "smtp"
        },
        "response": "{\"success\":false,\"error\":\"failed to get stats: pq: syntax error at or near \\\"$1\\\"\",\"code\":\"STATS_FETCH_FAILED\"}"
      },
      "timestamp": "2025-08-04 14:41:13"
    },
    {
      "test": "Stats Filtering - 7 days filter",
      "passed": false,
      "details": "\u274c SQL ERROR: Statistics endpoint still failing with 500 - SQL query fix not working",
      "response_data": {
        "status_code": 500,
        "params": {
          "days": "7"
        },
        "response": "{\"success\":false,\"error\":\"failed to get stats: pq: syntax error at or near \\\"$1\\\"\",\"code\":\"STATS_FETCH_FAILED\"}"
      },
      "timestamp": "2025-08-04 14:41:14"
    },
    {
      "test": "Stats Filtering - 30 days filter",
      "passed": false,
      "details": "\u274c SQL ERROR: Statistics endpoint still failing with 500 - SQL query fix not working",
      "response_data": {
        "status_code": 500,
        "params": {
          "days": "30"
        },
        "response": "{\"success\":false,\"error\":\"failed to get stats: pq: syntax error at or near \\\"$1\\\"\",\"code\":\"STATS_FETCH_FAILED\"}"
      },
      "timestamp": "2025-08-04 14:41:14"
    },
    {
      "test": "Stats Filtering - Combined filters",
      "passed": false,
      "details": "\u274c SQL ERROR: Statistics endpoint still failing with 500 - SQL query fix not working",
      "response_data": {
        "status_code": 500,
        "params": {
          "channel": "sms",
          "provider": "fast2sms",
          "days": "7"
        },
        "response": "{\"success\":false,\"error\":\"failed to get stats: pq: syntax error at or near \\\"$1\\\"\",\"code\":\"STATS_FETCH_FAILED\"}"
      },
      "timestamp": "2025-08-04 14:41:14"
    },
    {
      "test": "Statistics Filtering Summary",
      "passed": false,
      "details": "\u274c 10/10 statistics filtering tests failed (Success rate: 0/10)",
      "response_data": {
        "success_count": 0,
        "total_count": 10
      },
      "timestamp": "2025-08-04 14:41:14"
    },
    {
      "test": "Send Validation - Missing required fields",
      "passed": true,
      "details": "\u2705 FIXED: Proper validation error returned for Missing required fields",
      "response_data": {
        "status_code": 400,
        "error": "Recipient is required",
        "payload": {}
      },
      "timestamp": "2025-08-04 14:41:14"
    },
    {
      "test": "Send Validation - Missing recipient",
      "passed": true,
      "details": "\u2705 FIXED: Proper validation error returned for Missing recipient",
      "response_data": {
        "status_code": 400,
        "error": "Recipient is required",
        "payload": {
          "channel": "sms"
        }
      },
      "timestamp": "2025-08-04 14:41:14"
    },
    {
      "test": "Send Validation - Missing channel",
      "passed": true,
      "details": "\u2705 FIXED: Proper validation error returned for Missing channel",
      "response_data": {
        "status_code": 400,
        "error": "Invalid channel. Must be one of: sms, email, push, whatsapp",
        "payload": {
          "recipient": "+919876543210"
        }
      },
      "timestamp": "2025-08-04 14:41:14"
    },
    {
      "test": "Send Validation - Invalid channel",
      "passed": true,
      "details": "\u2705 FIXED: Proper validation error returned for Invalid channel",
      "response_data": {
        "status_code": 400,
        "error": "Invalid channel. Must be one of: sms, email, push, whatsapp",
        "payload": {
          "channel": "invalid_channel",
          "recipient": "+919876543210"
        }
      },
      "timestamp": "2025-08-04 14:41:14"
    },
    {
      "test": "Send Validation - Invalid SMS recipient (too short)",
      "passed": false,
      "details": "Wrong error message. Expected 'invalid phone number' in 'either template_id or body must be provided'",
      "response_data": {
        "status_code": 400,
        "error": "Either template_id or body must be provided",
        "expected": "invalid phone number"
      },
      "timestamp": "2025-08-04 14:41:14"
    },
    {
      "test": "Send Validation - Invalid SMS recipient (bad format)",
      "passed": false,
      "details": "Wrong error message. Expected 'phone number should start with' in 'either template_id or body must be provided'",
      "response_data": {
        "status_code": 400,
        "error": "Either template_id or body must be provided",
        "expected": "phone number should start with"
      },
      "timestamp": "2025-08-04 14:41:14"
    },
    {
      "test": "Send Validation - Invalid email recipient (no @)",
      "passed": false,
      "details": "Wrong error message. Expected 'invalid email format' in 'either template_id or body must be provided'",
      "response_data": {
        "status_code": 400,
        "error": "Either template_id or body must be provided",
        "expected": "invalid email format"
      },
      "timestamp": "2025-08-04 14:41:14"
    },
    {
      "test": "Send Validation - Invalid email recipient (no .)",
      "passed": false,
      "details": "Wrong error message. Expected 'invalid email format' in 'either template_id or body must be provided'",
      "response_data": {
        "status_code": 400,
        "error": "Either template_id or body must be provided",
        "expected": "invalid email format"
      },
      "timestamp": "2025-08-04 14:41:14"
    },
    {
      "test": "Send Validation - Invalid push token (too short)",
      "passed": false,
      "details": "Wrong error message. Expected 'invalid push token' in 'either template_id or body must be provided'",
      "response_data": {
        "status_code": 400,
        "error": "Either template_id or body must be provided",
        "expected": "invalid push token"
      },
      "timestamp": "2025-08-04 14:41:14"
    },
    {
      "test": "Send Validation - Missing template_id and body",
      "passed": true,
      "details": "\u2705 FIXED: Proper validation error returned for Missing template_id and body",
      "response_data": {
        "status_code": 400,
        "error": "Either template_id or body must be provided",
        "payload": {
          "channel": "sms",
          "recipient": "+919876543210"
        }
      },
      "timestamp": "2025-08-04 14:41:14"
    },
    {
      "test": "Send Notification Validation Summary",
      "passed": false,
      "details": "\u274c 5/10 validation tests failed (Success rate: 5/10)",
      "response_data": {
        "success_count": 5,
        "total_count": 10
      },
      "timestamp": "2025-08-04 14:41:14"
    },
    {
      "test": "Bulk Validation - Empty recipients and no user filter",
      "passed": true,
      "details": "\u2705 FIXED: Proper validation error returned for Empty recipients and no user filter",
      "response_data": {
        "status_code": 400,
        "error": "Recipients list or user filter is required for bulk notifications"
      },
      "timestamp": "2025-08-04 14:41:14"
    },
    {
      "test": "Bulk Validation - Too many recipients (>1000)",
      "passed": false,
      "details": "Wrong error message. Expected 'maximum 1000 recipients allowed' in 'either template_id or body must be provided'",
      "response_data": {
        "status_code": 400,
        "error": "Either template_id or body must be provided",
        "expected": "maximum 1000 recipients allowed"
      },
      "timestamp": "2025-08-04 14:41:14"
    },
    {
      "test": "Bulk Validation - Invalid recipient in bulk list",
      "passed": false,
      "details": "Wrong error message. Expected 'invalid recipient' in 'either template_id or body must be provided'",
      "response_data": {
        "status_code": 400,
        "error": "Either template_id or body must be provided",
        "expected": "invalid recipient"
      },
      "timestamp": "2025-08-04 14:41:14"
    },
    {
      "test": "Bulk Validation - Invalid email in bulk list",
      "passed": false,
      "details": "Wrong error message. Expected 'invalid recipient' in 'either template_id or body must be provided'",
      "response_data": {
        "status_code": 400,
        "error": "Either template_id or body must be provided",
        "expected": "invalid recipient"
      },
      "timestamp": "2025-08-04 14:41:14"
    },
    {
      "test": "Bulk Notification Validation Summary",
      "passed": false,
      "details": "\u274c 3/4 bulk validation tests failed (Success rate: 1/4)",
      "response_data": {
        "success_count": 1,
        "total_count": 4
      },
      "timestamp": "2025-08-04 14:41:14"
    },
    {
      "test": "Template Validation - Missing required fields",
      "passed": true,
      "details": "\u2705 FIXED: Proper validation error returned for Missing required fields",
      "response_data": {
        "status_code": 400,
        "error": "Template name is required"
      },
      "timestamp": "2025-08-04 14:41:14"
    },
    {
      "test": "Template Validation - Missing body",
      "passed": true,
      "details": "\u2705 FIXED: Proper validation error returned for Missing body",
      "response_data": {
        "status_code": 400,
        "error": "Template body is required"
      },
      "timestamp": "2025-08-04 14:41:14"
    },
    {
      "test": "Template Validation - Missing channel",
      "passed": true,
      "details": "\u2705 FIXED: Proper validation error returned for Missing channel",
      "response_data": {
        "status_code": 400,
        "error": "Invalid channel. Must be one of: sms, email, push, whatsapp"
      },
      "timestamp": "2025-08-04 14:41:14"
    },
    {
      "test": "Template Validation - Invalid channel",
      "passed": true,
      "details": "\u2705 FIXED: Proper validation error returned for Invalid channel",
      "response_data": {
        "status_code": 400,
        "error": "Invalid channel. Must be one of: sms, email, push, whatsapp"
      },
      "timestamp": "2025-08-04 14:41:14"
    },
    {
      "test": "Template Validation - Invalid provider",
      "passed": true,
      "details": "\u2705 FIXED: Proper validation error returned for Invalid provider",
      "response_data": {
        "status_code": 400,
        "error": "Invalid provider"
      },
      "timestamp": "2025-08-04 14:41:14"
    },
    {
      "test": "Template Validation - Name too long (>200 chars)",
      "passed": true,
      "details": "\u2705 FIXED: Proper validation error returned for Name too long (>200 chars)",
      "response_data": {
        "status_code": 400,
        "error": "Template name must not exceed 200 characters"
      },
      "timestamp": "2025-08-04 14:41:14"
    },
    {
      "test": "Template Validation - Subject too long (>500 chars)",
      "passed": true,
      "details": "\u2705 FIXED: Proper validation error returned for Subject too long (>500 chars)",
      "response_data": {
        "status_code": 400,
        "error": "Subject must not exceed 500 characters"
      },
      "timestamp": "2025-08-04 14:41:14"
    },
    {
      "test": "Template Validation Summary",
      "passed": true,
      "details": "\u2705 All template validation tests passed (Success rate: 7/7)",
      "response_data": {
        "success_count": 7,
        "total_count": 7
      },
      "timestamp": "2025-08-04 14:41:14"
    },
    {
      "test": "Valid Scenario - Valid SMS notification",
      "passed": false,
      "details": "Valid request failed with status 500",
      "response_data": {
        "status_code": 500,
        "response": "{\"success\":false,\"error\":\"NETWORK_ERROR: Failed to parse response (caused by: json: cannot unmarshal string into Go struct field Fast2SMSResponse.message of type []string)\",\"code\":\"SEND_FAILED\"}"
      },
      "timestamp": "2025-08-04 14:41:16"
    },
    {
      "test": "Valid Scenario - Valid email notification",
      "passed": false,
      "details": "Valid request failed with status 500",
      "response_data": {
        "status_code": 500,
        "response": "{\"success\":false,\"error\":\"INVALID_CONFIG: Missing required config: password\",\"code\":\"SEND_FAILED\"}"
      },
      "timestamp": "2025-08-04 14:41:17"
    },
    {
      "test": "Valid Scenario - Valid template creation",
      "passed": true,
      "details": "\u2705 Valid request processed successfully",
      "response_data": {
        "status_code": 201,
        "endpoint": "/admin/templates"
      },
      "timestamp": "2025-08-04 14:41:18"
    },
    {
      "test": "Valid Notification Scenarios Summary",
      "passed": false,
      "details": "\u274c 2/3 valid scenarios failed (Success rate: 1/3)",
      "response_data": {
        "success_count": 1,
        "total_count": 3
      },
      "timestamp": "2025-08-04 14:41:18"
    }
  ]
}